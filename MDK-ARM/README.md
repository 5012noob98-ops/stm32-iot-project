# STM32 IoT设备开发项目

## 项目简介

这是一个基于STM32的IoT设备开发项目，实现了以下功能：
- WiFi连接与MQTT通信
- 按键控制与LED状态管理
- 云端数据上报与命令接收
- 模块化软件架构设计

## 硬件平台

- 主控芯片：STM32F103C8T6
- WiFi模块：ESP8266
- 按键输入：2个独立按键
- LED指示：2个LED灯

## 软件架构

### 模块划分
1. **LED控制模块** - 负责LED状态控制和闪烁频率设置
2. **按键处理模块** - 实现完整的按键状态机
3. **ESP8266驱动模块** - 负责WiFi连接和MQTT通信
4. **云平台接口模块** - 处理设备状态上报和命令解析
5. **UART驱动模块** - 处理串口数据接收和命令处理
6. **定时器处理模块** - 管理系统时钟节拍和定时任务

## 功能特性

### 本地控制
- 单击KEY1：切换LED状态（LED1→LED2→LED1+LED2→全灭）
- 双击KEY1：LED闪烁模式
- 长按KEY1：关闭所有LED
- KEY1+KEY2长按：进入配置模式，可调整闪烁频率

### 远程控制
- 通过MQTT协议与阿里云IoT平台通信
- 支持远程控制LED开关
- 支持设置LED闪烁频率
- 定时上报设备状态

### 串口调试
- 支持简单命令控制（LED ON/OFF, BLINK, GET CONFIG）
- 实时输出调试信息

## 开发环境

- IDE：Keil MDK
- 编程语言：C语言
- SDK：STM32 HAL库
- 通信协议：MQTT, AT指令

## 项目进展

- [x] 完成模块化架构设计
- [x] 实现基本功能
- [ ] 完善错误处理机制
- [ ] 编写完整文档

## 学习成果

通过本项目，掌握了：
1. STM32嵌入式开发
2. WiFi通信与MQTT协议
3. 模块化软件设计
4. 实时系统概念
5. IoT设备开发流程
